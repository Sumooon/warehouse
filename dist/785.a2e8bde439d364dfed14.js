"use strict";(self.webpackChunkwarehouse=self.webpackChunkwarehouse||[]).push([[785],{44136:(e,t,n)=>{n.d(t,{v9:()=>s,bR:()=>u,yC:()=>i});var l=n(70655),r=n(9669),a=n.n(r);var o=new(function(){function e(e){var t=this;this.instance=a().create({baseURL:e.baseURL,timeout:6e4}),this.instance.interceptors.request.use((function(e){var t=(0,l.pi)({},e.params);return Object.keys(t).forEach((function(n){"[object Array]"===Object.prototype.toString.call(t[n])?0===t[n].length&&delete e.params[n]:""===t[n]&&delete e.params[n]})),e}),(function(e){return console.error("request err: "+e),Promise.reject(e)})),this.instance.interceptors.response.use((function(e){return(0,l.mG)(t,void 0,void 0,(function(){var t;return(0,l.Jh)(this,(function(n){return t=e.data,200!==e.status?[2,t]:[2,(null==t?void 0:t.data)||t]}))}))}))}return e.prototype.request=function(e){return this.instance.request(e)},e}())({baseURL:"/api/bqss"}),i=function(e){return o.request({url:"",params:{name:e}})},s=function(e){return o.request({url:"",params:{book:e}})},u=function(e){return o.request({params:{chapter:e}})}},45785:(e,t,n)=>{n.r(t),n.d(t,{default:()=>_});var l=n(66252),r=n(2262),a=n(60458),o=n(69678),i=n(30293),s=n(8443),u=n(16846),c=n(5314),d=n(61027),f=n(52639);function g(e){return Array.isArray(e)?!e.length:0!==e&&!e}function p(e,t){const{message:n}=t;return(0,d.mf)(n)?n(e,t):n||""}function m({target:e}){e.composing=!0}function v({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function h(e){return[...e].length}function b(e,t){return[...e].slice(0,t).join("")}var y=n(41690),k=n(86425);const[S,x]=(0,o.do)("cell"),W={tag:(0,s.SQ)("div"),icon:String,size:String,title:s.Or,value:s.Or,label:s.Or,center:Boolean,isLink:Boolean,border:s.J5,required:Boolean,iconPrefix:String,valueClass:s.Vg,labelClass:s.Vg,titleClass:s.Vg,titleStyle:null,arrowDirection:String,clickable:{type:Boolean,default:null}},w=(0,i.l7)({},W,y.g2);var C=(0,l.aZ)({name:S,props:w,setup(e,{slots:t}){const n=(0,y.yj)(),r=()=>{if(t.label||(0,d.Xq)(e.label))return(0,l.Wm)("div",{class:[x("label"),e.labelClass]},[t.label?t.label():e.label])},a=()=>{var n;if(t.title||(0,d.Xq)(e.title)){const a=null==(n=t.title)?void 0:n.call(t);if(Array.isArray(a)&&0===a.length)return;return(0,l.Wm)("div",{class:[x("title"),e.titleClass],style:e.titleStyle},[a||(0,l.Wm)("span",null,[e.title]),r()])}},o=()=>{const n=t.value||t.default;if(n||(0,d.Xq)(e.value))return(0,l.Wm)("div",{class:[x("value"),e.valueClass]},[n?n():(0,l.Wm)("span",null,[e.value])])},i=()=>{if(t["right-icon"])return t["right-icon"]();if(e.isLink){const t=e.arrowDirection&&"right"!==e.arrowDirection?`arrow-${e.arrowDirection}`:"arrow";return(0,l.Wm)(k.JO,{name:t,class:x("right-icon")},null)}};return()=>{var r;const{tag:s,size:u,center:c,border:d,isLink:f,required:g}=e,p=null!=(r=e.clickable)?r:f,m={center:c,required:g,clickable:p,borderless:!d};return u&&(m[u]=!!u),(0,l.Wm)(s,{class:x(m),role:p?"button":void 0,tabindex:p?0:void 0,onClick:n},{default:()=>{var n;return[t.icon?t.icon():e.icon?(0,l.Wm)(k.JO,{name:e.icon,class:x("left-icon"),classPrefix:e.iconPrefix},null):void 0,a(),o(),i(),null==(n=t.extra)?void 0:n.call(t)]}})}}}),q=n(40590);let V=0;function I(){const e=(0,l.FN)(),{name:t="unknown"}=(null==e?void 0:e.type)||{};return`${t}-${++V}`}function B(e){const t=(0,l.FN)();t&&(0,i.l7)(t.proxy,e)}const O=(0,a.n)(C);const[A,L]=(0,o.do)("field"),M={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:s.Or,formatter:Function,clearIcon:(0,s.SQ)("clear"),modelValue:(0,s.SI)(""),inputAlign:String,placeholder:String,autocomplete:String,errorMessage:String,enterkeyhint:String,clearTrigger:(0,s.SQ)("focus"),formatTrigger:(0,s.SQ)("onChange"),error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},P=(0,i.l7)({},W,M,{rows:s.Or,type:(0,s.SQ)("text"),rules:Array,autosize:[Boolean,Object],labelWidth:s.Or,labelClass:s.Vg,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var F=(0,l.aZ)({name:A,props:P,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:t,slots:n}){const a=I(),o=(0,r.qj)({status:"unvalidated",focused:!1,validateMessage:""}),s=(0,r.iH)(),y=(0,r.iH)(),S=(0,r.iH)(),{parent:x}=(0,q.NB)(c.WN),W=()=>{var t;return String(null!=(t=e.modelValue)?t:"")},w=t=>(0,d.Xq)(e[t])?e[t]:x&&(0,d.Xq)(x.props[t])?x.props[t]:void 0,C=(0,l.Fl)((()=>{const t=w("readonly");if(e.clearable&&!t){const t=""!==W(),n="always"===e.clearTrigger||"focus"===e.clearTrigger&&o.focused;return t&&n}return!1})),V=(0,l.Fl)((()=>S.value&&n.input?S.value():e.modelValue)),A=e=>e.reduce(((e,t)=>e.then((()=>{if("failed"===o.status)return;let{value:e}=V;if(t.formatter&&(e=t.formatter(e,t)),!function(e,t){if(g(e)){if(t.required)return!1;if(!1===t.validateEmpty)return!0}return!(t.pattern&&!t.pattern.test(String(e)))}(e,t))return o.status="failed",void(o.validateMessage=p(e,t));if(t.validator){if(g(e)&&!1===t.validateEmpty)return;return function(e,t){return new Promise((n=>{const l=t.validator(e,t);(0,d.tI)(l)?l.then(n):n(l)}))}(e,t).then((n=>{n&&"string"==typeof n?(o.status="failed",o.validateMessage=n):!1===n&&(o.status="failed",o.validateMessage=p(e,t))}))}}))),Promise.resolve()),M=()=>{o.status="unvalidated",o.validateMessage=""},P=()=>t("endValidate",{status:o.status,message:o.validateMessage}),F=(n=e.rules)=>new Promise((l=>{M(),n?(t("startValidate"),A(n).then((()=>{"failed"===o.status?(l({name:e.name,message:o.validateMessage}),P()):(o.status="passed",l(),P())}))):l()})),T=t=>{if(x&&e.rules){const{validateTrigger:n}=x.props,l=(0,i.qo)(n).includes(t),r=e.rules.filter((e=>e.trigger?(0,i.qo)(e.trigger).includes(t):l));r.length&&F(r)}},j=(n,l="onChange")=>{const r=n;n=(t=>{var n;const{maxlength:l}=e;if((0,d.Xq)(l)&&h(t)>+l){const e=W();if(e&&h(e)===+l)return e;const r=null==(n=s.value)?void 0:n.selectionEnd;if(o.focused&&r){const e=[...t],n=e.length-+l;return e.splice(r-n,n),e.join("")}return b(t,+l)}return t})(n);const a=h(r)-h(n);if("number"===e.type||"digit"===e.type){const t="number"===e.type;n=(0,f.uf)(n,t,t)}let i=0;if(e.formatter&&l===e.formatTrigger){const{formatter:t,maxlength:l}=e;if(n=t(n),(0,d.Xq)(l)&&h(n)>+l&&(n=b(n,+l)),s.value&&o.focused){const{selectionEnd:e}=s.value,n=b(r,e);i=h(t(n))-h(n)}}if(s.value&&s.value.value!==n)if(o.focused){let{selectionStart:e,selectionEnd:t}=s.value;if(s.value.value=n,(0,d.Xq)(e)&&(0,d.Xq)(t)){const l=h(n);a?(e-=a,t-=a):i&&(e+=i,t+=i),s.value.setSelectionRange(Math.min(e,l),Math.min(t,l))}}else s.value.value=n;n!==e.modelValue&&t("update:modelValue",n)},z=e=>{e.target.composing||j(e.target.value)},E=()=>{var e;return null==(e=s.value)?void 0:e.blur()},H=()=>{const t=s.value;"textarea"===e.type&&e.autosize&&t&&function(e,t){const n=(0,u.oD)();e.style.height="auto";let l=e.scrollHeight;if((0,d.Kn)(t)){const{maxHeight:e,minHeight:n}=t;void 0!==e&&(l=Math.min(l,e)),void 0!==n&&(l=Math.max(l,n))}l&&(e.style.height=`${l}px`,(0,u.kn)(n))}(t,e.autosize)},R=e=>{o.focused=!0,t("focus",e),(0,l.Y3)(H),w("readonly")&&E()},J=e=>{o.focused=!1,j(W(),"onBlur"),t("blur",e),w("readonly")||(T("onBlur"),(0,l.Y3)(H),(0,u.pe)())},$=e=>t("clickInput",e),U=e=>t("clickLeftIcon",e),X=e=>t("clickRightIcon",e),Y=(0,l.Fl)((()=>"boolean"==typeof e.error?e.error:!(!x||!x.props.showError||"failed"!==o.status)||void 0)),D=(0,l.Fl)((()=>{const e=w("labelWidth"),t=w("labelAlign");if(e&&"top"!==t)return{width:(0,f.Nn)(e)}})),Q=n=>{if(13===n.keyCode){x&&x.props.submitOnEnter||"textarea"===e.type||(0,u.PF)(n),"search"===e.type&&E()}t("keypress",n)},N=()=>e.id||`${a}-input`,Z=()=>{const t=L("control",[w("inputAlign"),{error:Y.value,custom:!!n.input,"min-height":"textarea"===e.type&&!e.autosize}]);if(n.input)return(0,l.Wm)("div",{class:t,onClick:$},[n.input()]);const r={id:N(),ref:s,name:e.name,rows:void 0!==e.rows?+e.rows:void 0,class:t,disabled:w("disabled"),readonly:w("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,enterkeyhint:e.enterkeyhint,"aria-labelledby":e.label?`${a}-label`:void 0,onBlur:J,onFocus:R,onInput:z,onClick:$,onChange:v,onKeypress:Q,onCompositionend:v,onCompositionstart:m};return"textarea"===e.type?(0,l.Wm)("textarea",r,null):(0,l.Wm)("input",(0,l.dG)("number"===(o=e.type)?{type:"text",inputmode:"decimal"}:"digit"===o?{type:"tel",inputmode:"numeric"}:{type:o},r),null);var o},K=()=>{const t=n["right-icon"];if(e.rightIcon||t)return(0,l.Wm)("div",{class:L("right-icon"),onClick:X},[t?t():(0,l.Wm)(k.JO,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},G=()=>{if(e.showWordLimit&&e.maxlength){const t=h(W());return(0,l.Wm)("div",{class:L("word-limit")},[(0,l.Wm)("span",{class:L("word-num")},[t]),(0,l.Uk)("/"),e.maxlength])}},_=()=>{if(x&&!1===x.props.showErrorMessage)return;const t=e.errorMessage||o.validateMessage;if(t){const e=n["error-message"],r=w("errorMessageAlign");return(0,l.Wm)("div",{class:L("error-message",r)},[e?e({message:t}):t])}},ee=()=>[(0,l.Wm)("div",{class:L("body")},[Z(),C.value&&(0,l.Wm)(k.JO,{ref:y,name:e.clearIcon,class:L("clear")},null),K(),n.button&&(0,l.Wm)("div",{class:L("button")},[n.button()])]),G(),_()];return B({blur:E,focus:()=>{var e;return null==(e=s.value)?void 0:e.focus()},validate:F,formValue:V,resetValidation:M,getValidationStatus:()=>o.status}),(0,l.JJ)(q.F1,{customValue:S,resetValidation:M,validateWithTrigger:T}),(0,l.YP)((()=>e.modelValue),(()=>{j(W()),M(),T("onChange"),(0,l.Y3)(H)})),(0,l.bv)((()=>{j(W(),e.formatTrigger),(0,l.Y3)(H)})),(0,q.OR)("touchstart",(e=>{(0,u.PF)(e),t("update:modelValue",""),t("clear",e)}),{target:(0,l.Fl)((()=>{var e;return null==(e=y.value)?void 0:e.$el}))}),()=>{const t=w("disabled"),r=w("labelAlign"),o=(()=>{const t=n["left-icon"];if(e.leftIcon||t)return(0,l.Wm)("div",{class:L("left-icon"),onClick:U},[t?t():(0,l.Wm)(k.JO,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])})();return(0,l.Wm)(O,{size:e.size,class:L({error:Y.value,disabled:t,[`label-${r}`]:r}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:D.value,valueClass:L("value"),titleClass:[L("label",[r,{required:e.required}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:o&&"top"!==r?()=>o:null,title:()=>{const t=(()=>{const t=w("labelWidth"),r=w("labelAlign"),o=w("colon")?":":"";return n.label?[n.label(),o]:e.label?(0,l.Wm)("label",{id:`${a}-label`,for:N(),style:"top"===r&&t?{width:(0,f.Nn)(t)}:void 0},[e.label+o]):void 0})();return"top"===r?[o,t].filter(Boolean):t||[]},value:ee,extra:n.extra})}}});const T=(0,a.n)(F);const[j,z,E]=(0,o.do)("search"),H=(0,i.l7)({},M,{label:String,shape:(0,s.SQ)("square"),leftIcon:(0,s.SQ)("search"),clearable:s.J5,actionText:String,background:String,showAction:Boolean});var R=(0,l.aZ)({name:j,props:H,emits:["blur","focus","clear","search","cancel","clickInput","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:t,slots:n,attrs:a}){const o=I(),s=(0,r.iH)(),c=()=>{n.action||(t("update:modelValue",""),t("cancel"))},d=n=>{13===n.keyCode&&((0,u.PF)(n),t("search",e.modelValue))},f=()=>e.id||`${o}-input`,g=()=>{if(n.label||e.label)return(0,l.Wm)("label",{class:z("label"),for:f()},[n.label?n.label():e.label])},p=()=>{if(e.showAction){const t=e.actionText||E("cancel");return(0,l.Wm)("div",{class:z("action"),role:"button",tabindex:0,onClick:c},[n.action?n.action():t])}},m=e=>t("blur",e),v=e=>t("focus",e),h=e=>t("clear",e),b=e=>t("clickInput",e),y=e=>t("clickLeftIcon",e),k=e=>t("clickRightIcon",e),S=Object.keys(M),x=()=>{const r=(0,i.l7)({},a,(0,i.ei)(e,S),{id:f()});return(0,l.Wm)(T,(0,l.dG)({ref:s,type:"search",class:z("field"),border:!1,onBlur:m,onFocus:v,onClear:h,onKeypress:d,onClickInput:b,onClickLeftIcon:y,onClickRightIcon:k,"onUpdate:modelValue":e=>t("update:modelValue",e)},r),(0,i.ei)(n,["left-icon","right-icon"]))};return B({focus:()=>{var e;return null==(e=s.value)?void 0:e.focus()},blur:()=>{var e;return null==(e=s.value)?void 0:e.blur()}}),()=>{var t;return(0,l.Wm)("div",{class:z({"show-action":e.showAction}),style:{background:e.background}},[null==(t=n.left)?void 0:t.call(n),(0,l.Wm)("div",{class:z("content",e.shape)},[g(),x()]),p()])}}});const J=(0,a.n)(R);const $=Symbol();var U=n(64105);const[X,Y,D]=(0,o.do)("list"),Q={error:Boolean,offset:(0,s.SI)(300),loading:Boolean,disabled:Boolean,finished:Boolean,errorText:String,direction:(0,s.SQ)("down"),loadingText:String,finishedText:String,immediateCheck:s.J5};var N=(0,l.aZ)({name:X,props:Q,emits:["load","update:error","update:loading"],setup(e,{emit:t,slots:n}){const a=(0,r.iH)(e.loading),o=(0,r.iH)(),i=(0,r.iH)(),s=(0,l.f3)($,null),c=(0,q.eo)(o),d=()=>{(0,l.Y3)((()=>{if(a.value||e.finished||e.disabled||e.error||!1===(null==s?void 0:s.value))return;const{direction:n}=e,l=+e.offset,r=(0,q.EL)(c);if(!r.height||(0,u.xj)(o))return;let d=!1;const f=(0,q.EL)(i);d="up"===n?r.top-f.top<=l:f.bottom-r.bottom<=l,d&&(a.value=!0,t("update:loading",!0),t("load"))}))},f=()=>{if(e.finished){const t=n.finished?n.finished():e.finishedText;if(t)return(0,l.Wm)("div",{class:Y("finished-text")},[t])}},g=()=>{t("update:error",!1),d()},p=()=>{if(e.error){const t=n.error?n.error():e.errorText;if(t)return(0,l.Wm)("div",{role:"button",class:Y("error-text"),tabindex:0,onClick:g},[t])}},m=()=>{if(a.value&&!e.finished&&!e.disabled)return(0,l.Wm)("div",{class:Y("loading")},[n.loading?n.loading():(0,l.Wm)(U.gb,{class:Y("loading-icon")},{default:()=>[e.loadingText||D("loading")]})])};return(0,l.YP)((()=>[e.loading,e.finished,e.error]),d),s&&(0,l.YP)(s,(e=>{e&&d()})),(0,l.ic)((()=>{a.value=e.loading})),(0,l.bv)((()=>{e.immediateCheck&&d()})),B({check:d}),(0,q.OR)("scroll",d,{target:c,passive:!0}),()=>{var t;const r=null==(t=n.default)?void 0:t.call(n),s=(0,l.Wm)("div",{ref:i,class:Y("placeholder")},null);return(0,l.Wm)("div",{ref:o,role:"feed",class:Y(),"aria-busy":a.value},["down"===e.direction?r:s,m(),f(),p(),"up"===e.direction?r:s])}}});const Z=(0,a.n)(N);var K=n(44136),G=n(83440);const _=(0,l.aZ)({__name:"search",setup:function(e){var t=(0,r.qj)({loading:!1,search:"",data:[]}),n=function(e){return e.chapter?"最新章节: "+e.chapter:""+e.time?" 更新时间: "+e.time:""},a=function(e){t.loading=!0,(0,K.yC)(e).then((function(e){t.loading=!1,t.data=e||[]}))},o=function(){t.search=""},i=function(){t.loading=!1};return function(e,s){return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)((0,r.SU)(J),{modelValue:t.search,"onUpdate:modelValue":s[0]||(s[0]=function(e){return t.search=e}),placeholder:"请输入书名/作者",onSearch:a,onClear:o},null,8,["modelValue"]),(0,l.Wm)((0,r.SU)(Z),{loading:t.loading,"onUpdate:loading":s[1]||(s[1]=function(e){return t.loading=e}),"finished-text":"没有了",onLoad:i},{default:(0,l.w5)((function(){return[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.data,(function(e,t){return(0,l.wg)(),(0,l.j4)((0,r.SU)(O),{key:t,title:e.name,value:e.author,label:n(e),onClick:function(t){return function(e){G.Z.push({path:"/novel/book",query:{title:e.name,url:e.link}})}(e)}},null,8,["title","value","label","onClick"])})),128))]})),_:1},8,["loading"])],64)}}})},41690:(e,t,n)=>{n.d(t,{g2:()=>r,yj:()=>a});var l=n(66252);const r={to:[String,Object],url:String,replace:Boolean};function a(){const e=(0,l.FN)().proxy;return()=>function({to:e,url:t,replace:n,$router:l}){e&&l?l[n?"replace":"push"](e):t&&(n?location.replace(t):location.href=t)}(e)}},64105:(e,t,n)=>{n.d(t,{gb:()=>m});var l=n(60458),r=n(66252),a=n(69678),o=n(8443),i=n(30293),s=n(52639);const[u,c]=(0,a.do)("loading"),d=Array(12).fill(null).map(((e,t)=>(0,r.Wm)("i",{class:c("line",String(t+1))},null))),f=(0,r.Wm)("svg",{class:c("circular"),viewBox:"25 25 50 50"},[(0,r.Wm)("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),g={size:o.Or,type:(0,o.SQ)("circular"),color:String,vertical:Boolean,textSize:o.Or,textColor:String};var p=(0,r.aZ)({name:u,props:g,setup(e,{slots:t}){const n=(0,r.Fl)((()=>(0,i.l7)({color:e.color},(0,s.Xn)(e.size)))),l=()=>{const l="spinner"===e.type?d:f;return(0,r.Wm)("span",{class:c("spinner",e.type),style:n.value},[t.icon?t.icon():l])},a=()=>{var n;if(t.default)return(0,r.Wm)("span",{class:c("text"),style:{fontSize:(0,s.Nn)(e.textSize),color:null!=(n=e.textColor)?n:e.color}},[t.default()])};return()=>{const{type:t,vertical:n}=e;return(0,r.Wm)("div",{class:c([t,{vertical:n}]),"aria-live":"polite","aria-busy":!0},[l(),a()])}}});const m=(0,l.n)(p)}}]);